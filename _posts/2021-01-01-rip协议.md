---
layout:     post
title:      dns原理
subtitle:   网络协议
date:       2021-01-01
author:     tahano
header-img: img/back2.jpg
catalog: true
tags:
    - 计算机网络
---

##    dns的工作原理  

将主机域名转换为ip地址，属于应用层协议，使用UDP传输。（DNS应用层协议，以前有个考官问过）

过程：

总结： 浏览器缓存，系统缓存，路由器缓存，IPS服务器缓存，根域名服务器缓存，顶级域名服务器缓存，主域名服务器缓存。

一、主机向本地域名服务器的查询一般都是采用递归查询。

二、本地域名服务器向根域名服务器的查询的迭代查询。

1)当用户输入域名时，浏览器先检查自己的缓存中是否 这个域名映射的ip地址，有解析结束。

2）若没命中，则检查操作系统缓存（如Windows的hosts）中有没有解析过的结果，有解析结束。

3）若无命中，则请求本地域名服务器解析（ LDNS）。

4）若LDNS没有命中就直接跳到根域名服务器请求解析。根域名服务器返回给LDNS一个 主域名服务器

地址。

5） 此时LDNS再发送请求给上一步返回的gTLD（ 通用顶级域）， 接受请求的gTLD查找并返回这个域名

对应的Name Server的地址

6） Name Server根据映射关系表找到目标ip，返回给LDNS

7） LDNS缓存这个域名和对应的ip， 把解析的结果返回给用户，用户根据TTL值缓存到本地系统缓存

中，域名解析过程至此结束  

